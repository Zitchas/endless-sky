# Copyright (c) 2014 by Michael Zahniser for the first 6 jobs
# Copyright (c) 2021 by Hurleveur for the rest
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.



phrase "unfettered aid payment dialog"
	word
		`You drop off the aid (or as they like to refer to it, "tribute") for the Unfettered, and receive <payment> from your contact on <origin>.`

phrase "unfettered aid pickup dialog"
	word
		`The Hai dockworkers load the food for the Unfettered onto your ship. One of them says to you,`
		`As the Hai load the food onto your ship, one of them says,`
	word
		` `
	word
		`"Thank you. This is far better than watching our kinfolk starve."`
		`"Tell our brothers and sisters that if they will only repent, they will be welcome to come home."`

mission "Unfettered Aid [0]"
	name "Aid shipment to Unfettered"
	job
	repeat
	clearance "After speaking with the Unfettered and explaining your presence, they give you permission to land with the cargo."
	description "Deliver <tons> of food to the Unfettered on <destination>. You will be paid <payment>."
	cargo "food (aid)" 25 2 .05
	to offer
		random < 40
		"cargo space" >= 50
		has "Ask the Hai about the Unfettered: offered"
	source
		government "Hai"
	destination
		distance 3 4
		attributes "unfettered"
	on accept
		dialog phrase "unfettered aid pickup dialog"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		payment 5000 1600
		"reputation: Hai" += 5
		"reputation: Hai (Wormhole Access)" += 5
		"reputation: Hai Merchant" += 5
		"reputation: Hai Merchant (Human)" += 5
		"reputation: Hai Merchant (Sympathizers)" += 5
		dialog phrase "unfettered aid payment dialog"

mission "Unfettered Aid [1]"
	name "Aid shipment to Unfettered"
	job
	repeat
	clearance "After speaking with the Unfettered and explaining your presence, they give you permission to land with the cargo."
	description "Deliver <tons> of food to the Unfettered on <destination>. You will be paid <payment>."
	cargo "food (aid)" 30 2 .05
	to offer
		random < 30
		"cargo space" > 60
		has "Ask the Hai about the Unfettered: offered"
	source
		government "Hai"
	destination
		distance 4 5
		attributes "unfettered"
	on accept
		dialog phrase "unfettered aid pickup dialog"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		payment 6000 1800
		"reputation: Hai" += 5
		"reputation: Hai (Wormhole Access)" += 5
		"reputation: Hai Merchant" += 5
		"reputation: Hai Merchant (Human)" += 5
		"reputation: Hai Merchant (Sympathizers)" += 5
		dialog phrase "unfettered aid payment dialog"

mission "Unfettered Aid [2]"
	name "Aid shipment to Unfettered"
	job
	repeat
	clearance "After speaking with the Unfettered and explaining your presence, they give you permission to land with the cargo."
	description "Deliver <tons> of food to the Unfettered on <destination>. You will be paid <payment>."
	cargo "food (aid)" 35 2 .05
	to offer
		random < 20
		"cargo space" > 65
		has "Ask the Hai about the Unfettered: offered"
	source
		government "Hai"
	destination
		distance 5 6
		attributes "unfettered"
	on accept
		dialog phrase "unfettered aid pickup dialog"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		payment 7000 2000
		"reputation: Hai" += 5
		"reputation: Hai (Wormhole Access)" += 5
		"reputation: Hai Merchant" += 5
		"reputation: Hai Merchant (Human)" += 5
		"reputation: Hai Merchant (Sympathizers)" += 5
		dialog phrase "unfettered aid payment dialog"

phrase "unfettered tribute payment dialog"
	word
		`You drop off the tribute to the Unfettered, and they pay you <payment>.`

phrase "unfettered tribute pickup dialog"
	word
		`When you inform the Hai that you are here to receive a tribute payment for the Unfettered, they load the cargo onto your ship with a rather surprising swiftness and cheerfulness.`
		`The Hai dockworkers load the tribute for the Unfettered onto your ship. One of them says to you, "Thank you. This is far better than watching our kinfolk starve."`
		`As the Hai load the tribute onto your ship, one of them says, "Tell our brothers and sisters that if they will only repent, they will be welcome to come home."`

mission "Unfettered Tribute 1"
	name "Hai Tribute to <planet>"
	job
	repeat
	description "Collect a tribute payment of <tons> of food from <stopovers>, and bring it to the Unfettered on <destination>. Your share of the tribute will be <payment>."
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 80
	cargo "food (tribute)" 25 2 .05
	on complete
		payment 5000 1600
		dialog phrase "unfettered tribute payment dialog"
	source
		attributes "unfettered"
	stopover
		distance 3 4
		attributes "hai"
		attributes "spaceport"
	on visit
		dialog phrase "generic missing stopover or cargo"
	on stopover
		dialog phrase "unfettered tribute pickup dialog"

mission "Unfettered Tribute 2"
	name "Hai Tribute to <planet>"
	job
	repeat
	description "Collect a tribute payment of <tons> of food from <stopovers>, and bring it to the Unfettered on <destination>. Your share of the tribute will be <payment>."
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 60
	cargo "food (tribute)" 35 2 .05
	on complete
		payment 7000 2000
		dialog phrase "unfettered tribute payment dialog"
	source
		attributes "unfettered"
	stopover
		distance 4 5
		attributes "hai"
		attributes "spaceport"
	on visit
		dialog phrase "generic missing stopover or cargo"
	on stopover
		dialog phrase "unfettered tribute pickup dialog"

mission "Unfettered Tribute 3"
	name "Hai Tribute to <planet>"
	job
	repeat
	description "Collect a tribute payment of <tons> of food from <stopovers>, and bring it to the Unfettered on <destination>. Your share of the tribute will be <payment>."
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 40
	cargo "food (tribute)" 45 2 .05
	on complete
		payment 9000 2400
		dialog phrase "unfettered tribute payment dialog"
	source
		attributes "unfettered"
	stopover
		distance 5 6
		attributes "hai"
		attributes "spaceport"
	on visit
		dialog phrase "generic missing stopover or cargo"
	on stopover
		dialog phrase "unfettered tribute pickup dialog"



mission "Proud Unfettered Boarded"
	boarding
	repeat
	minor
	to offer
		"flagship crew" > 120
		random < "flagship crew" / 8
	source
		government "Hai (Unfettered)"
		category "Heavy Warship"
	on offer
		conversation
			`As you board the <origin> you immediately notice something is wrong: the ship is starting to explode! The captain sends you a message. "This is not a fair fight. It is better to die with my crew standing than risk being slaughtered by inferior humans! You will not be allowed to capture this ship and use it against our brothers and sisters. I will take you down with us!"`
				flee
	destination "Darkcloak"



mission "Unfettered Silicon Asteroid Mining"
	name `Gather silicon`
	description `Mine and then collect 50 tons of silicon from the asteroid field in Wah Yoot, and then bring them back to <destination> for <payment>.`
	job
	repeat
	source "Darkcloak"
	to offer
		has "First Contact: Unfettered: declined"
		random < 60
	on complete
		payment 250000
		dialog `The group of Unfettered unloading the materials you mined seems enthused. "Keep this up and we will be building new ships in no time! Some use those asteroids as target practice, you know, but most find it dull and too easy to fight an enemy that does not shoot or react in any other way," one tells you as it hands over your payment of <payment> credits.`
		outfit "Silicon" -50

mission "Unfettered Silver Asteroid Mining"
	name `Gather silver from asteroids`
	description `Mine and then collect 15 tons of silver from the asteroid field in Ehma Ti and then bring them back to <destination> for <payment>.`
	job
	repeat
	source "Firelode"
	destination "Darkcloak"
	waypoint "Ehma Ti"
	to offer
		has "First Contact: Unfettered: declined"
		random < 60
	on complete
		payment 400000
		dialog `The Unfettered unloading the materials you mined seem satisfied. "This will allow us to repair our ships! Too few captains are patient enough to gather asteroids like you are. Most of them try to get the resources from enemy ships, but this is a safer way to do it." One tells you as it hands over your payment of <payment> credits.`
		outfit "Silver" -15



mission "Unfettered Medicals"
	name `Express medical supplies to <planet>`
	description `The Unfettered hospitals on Darkcloak are in urgent need of resupply. Collect <tons> of medical supplies from <stopovers>, and bring it to the Unfettered on <destination> by <date> for <payment>.`
	job
	repeat
	deadline 10 1
	source
		attributes "unfettered"
	destination "Darkcloak"
	to offer
		has "Unfettered Jump Drive 1: offered"
		random < 80
	cargo "medicals" 15 2 .05
	stopover
		distance 5 7
		government "Hai"
		attributes "spaceport"
	on visit
		dialog phrase "generic missing stopover or cargo"
	on stopover
		dialog `You are surprised to see the Hai are more than happy to give you the medical supplies needed. "Tell our brothers and sisters to stay strong," one says while loading the supplies onto your ship.`
	on complete
		payment 10000 4000
		dialog `The local health specialists are relieved that you have managed to bring the needed medical supplies back in time.`



mission "Unfettered Challenge [0]"
	name `Defeat young Unfettered captain`
	description `A young Unfettered captain has provoked you into a duel. Disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 60
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Sea Scorpion (Pulse)"
		conversation
			action
				payment 200000
				"reputation: Hai (Unfettered)" += 15
				fail "Unfettered Challenge [0]"
			`You receive a message from the <npc>: "Did you cheat? If I learn you cheated, I will be the end of you, little monkey! Here is the <payment>, but I will want my money back if this was not a fair fight. Otherwise, you may have gained my respect."`
				decline

mission "Unfettered Challenge [1]"
	name `Defeat Unfettered captain`
	description `An Unfettered captain has provoked you into a duel. Disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 2: offered"
		has "Unfettered: Prove Your Strength"
		random < 40
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Sea Scorpion (Pulse)" 2
		conversation
			action
				payment 400000
				"reputation: Hai (Unfettered)" += 30
				fail "Unfettered Challenge [1]"
			`You receive a message from the <npc> : "Raaaah... Well, you have beaten me fairly, so I'll pay up... Here are the <payment> credits, captain. Next time I will not underestimate you anymore!"`
				decline

mission "Unfettered Challenge [2]"
	name `Defeat experienced Unfettered captain`
	description `An experienced Unfettered captain has provoked you into a duel. Disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 3: offered"
		has "Unfettered: Prove Your Strength"
		random < 10
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Shield Beetle (Pulse)"
				"Sea Scorpion (Pulse)"
		dialog `You receive an ominous message from the <npc>: "You seem to learn from our encounters well... next time it will be different.`
		conversation
			action
				payment 600000
				"reputation: Hai (Unfettered)" += 60
				fail "Unfettered Challenge [2]"
			`You receive a message from the <npc> : "Nicely done! You seem to learn from our encounters well... But next time will be different, I assure you. For now, here are the agreed <payment> credits, captain. Hopefully it allows you to improve the <ship> before our next battle..."`
				decline



phrase "jump drive or stopover"
	word
		`You have a mission to bring a jump drive here on <planet>, from <stopovers>. You may have left your escort allocated to carrying the jump drive behind, in which case you better launch and wait for it.`

mission "Get Jump Drives(1)"
	name `Collect a jump drive`
	description `Go to the pirate world of <stopovers> to recover a jump drive from a vault, then bring it to <destination> for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	destination "Darkcloak"
	to offer
		random < 30
		has "Unfettered: Prove your strength 2: done"
	stopover
		distance 12 18
		government "Pirate"
	on stopover
		dialog `You manage to land and retrieve the jump drive without too much trouble. Do not rely on luck too long though - you should depart quickly!`
		outfit "Jump Drive"
	on visit
		dialog phrase "jump drive or stopover"
	on complete
		payment 500000
		outfit "Jump Drive" -1
		dialog `The Unfettered are more than content with paying <payment> credits in exchange for your precious cargo.`

mission "Get Jump Drives (2)"
	name `Collect 2 jump drives`
	description `Go to the pirate world of <stopovers> and recover 2 jump drives from a vault, then bring to <destination> for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	destination "Darkcloak"
	to offer
		random < 15
		has "Unfettered: Prove your strength 2: done"
	stopover
		distance 12 18
		government "Pirate"
	on stopover
		dialog phrase "jump drive or stopover"
		outfit "Jump Drive" 2
	on visit
		dialog `You have a mission to bring a jump drive here. You may have left your escort carrying the jump drive behind, in which case you better launch and wait for it.`
	on complete
		payment 1000000
		outfit "Jump Drive" -2
		dialog `The Unfettered are more than content with paying <payment> credits in exchange for your precious cargo.`

mission "Get Jump Drives (3)"
	name `Collect 3 jump drives`
	description `Go to the pirate world of <stopovers> and recover 3 jump drives from a vault, then bring to <destination> for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	destination "Darkcloak"
	to offer
		random < 5
		has "Unfettered: Prove your strength 2: done"
	stopover "Deadman's Cove"
	on stopover
		dialog `You manage to land and retrieve the jump drive without too much trouble. Do not rely on luck too long though - you should depart quickly!`
		outfit "Jump Drive" 3
	on visit
		dialog phrase "jump drive or stopover"
	on complete
		payment 1500000
		outfit "Jump Drive" -3
		dialog `The Unfettered are more than content with paying <payment> credits in exchange for your precious cargo.`



mission "Bring True Hai"
	name `Bring True Hai`
	description `Land on <stopovers> and bring back <bunks> True Hai to where they belong, on <destination> for <payment>.`
	job
	repeat
	passengers 5 8 .2
	source
		attributes "unfettered"
	destination
		attributes "unfettered"
	to offer
		random < 75
		has "Unfettered: The Word Has Spread: done"
	stopover
		distance 3 6
		government "Hai"
		attributes "spaceport"
	on stopover
		dialog `You have picked up all <bunks> Hai. Now all that is left is to bring them to <destination>.`
	on visit
		dialog phrase "generic missing stopover or passengers"
	on complete
		payment
		payment 150000
		dialog `You feel good that you managed to bring these Hai to their true home. The Unfettered hand you the agreed payment of <payment>.`



mission "Darkcloak Ship Materials"
	name `Ship materials from <stopovers>`
	description `The shipyards of <origin> are in grave need of raw materials. Go to the pirate world of <stopovers> to get <tons> of materials for building new ships, and bring them back to <destination> by <date> for <payment>.`
	job
	repeat
	deadline 15 1
	source `Darkcloak`
	cargo "ship materials" 50 15 .015
	to offer
		random < 50
		has "Unfettered Jump Drive 3: done"
		has "Unfettered: The War Has Started"
	stopover
		distance 12 18
		government "Pirate"
	on stopover
		dialog `After some searching, you manage to find your contacts: a few shady individuals who seem especially anxious not to be noticed dealing with you. Together you find a quieter place to proceed with the exchange, and later find the materials at the agreed location. You prepare to head back to <origin> and deliver them.`
	on visit
		dialog phrase "generic missing stopover or cargo"
	on complete
		payment 50000 7000
		dialog `The Unfettered promise you many new, grandiose ships will be built with this new material. As long as you get your <payment>, that seems good to you.`
